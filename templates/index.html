<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Enhanced viewport tag for better WebView rendering -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Add mobile web app capability -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- Disable text resizing -->
    <meta name="text-size-adjust" content="100%">
    <title>Cryptora | Premium Crypto Assistant</title>
    <!-- Preload font for faster rendering -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" as="style">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <!-- Inline critical CSS to prevent flash of unstyled content -->
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #0a0a0a;
            color: #d4af37;
            font-family: 'Space Grotesk', sans-serif;
            height: 100vh;
            overflow: hidden;
        }
        /* Force hardware acceleration for smoother animations */
        * {
            -webkit-tap-highlight-color: transparent;
            -webkit-overflow-scrolling: touch;
            backface-visibility: hidden;
            transform: translateZ(0);
        }
        /* Make sure response boxes look good in WebView */
        .response-box {
            background-color: rgba(20, 20, 30, 0.9);
            padding: 12px;
            margin: 10px 0;
            border-left: 4px solid gold;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body>
    <!-- Animated background elements -->
    <div class="bg-elements">
        <div class="bg-element"></div>
        <div class="bg-element"></div>
        <div class="bg-element"></div>
    </div>

    <div class="header">
        <h1>CRYPTORA</h1>
        <img src="{{ url_for('static', filename='img/logo1.png') }}" alt="Cryptora Logo" class="logo">
    </div>
    
    <div class="chat-container" id="chat-container">
        <div class="message bot-message">
            Hello! I'm your crypto assistant. How can I help you today?
            <div class="message-time" id="initial-message-time"></div>
        </div>
        <div class="typing-indicator" id="typing-indicator">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
    
    <div class="input-container">
        <input type="text" class="message-input" id="message-input" placeholder="Ask about crypto...">
        <button type="button" class="send-button" id="send-button" aria-label="Send message">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </button>
    </div>

    <!-- Add this hidden element for WebView status detection -->
    <div id="webview-detector" style="display:none;"></div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <!-- Prevent zoom on double tap for iOS WebView -->
    <script>
        // Prevent double-tap zoom in iOS WebView
        var lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
            var now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
        
        // Initialize time for initial message
        document.addEventListener('DOMContentLoaded', function() {
            const initialMessageTime = document.getElementById('initial-message-time');
            if (initialMessageTime) {
                const now = new Date();
                initialMessageTime.textContent = now.getHours() + ':' + 
                    (now.getMinutes() < 10 ? '0' : '') + now.getMinutes();
            }
        });
    </script>
</body>
</html>